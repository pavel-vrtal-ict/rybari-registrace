<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HlybuÄek â€“ Evidence rybolovu</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

    <header>
        <div class="header-content">
            <h1>ğŸ£ HlybuÄek</h1>
            <p class="subtitle">Evidence rybolovu Â· Kapr 45â€“60 cm</p>
        </div>
        <button class="header-settings-btn" id="btn-open-settings" title="NastavenÃ­">âš™ï¸</button>
    </header>

    <div id="sync-bar" class="sync-bar sync-local">
        <span id="sync-icon">ğŸ’¾</span>
        <span id="sync-text">LokÃ¡lnÃ­ reÅ¾im</span>
        <button class="sync-setup-btn" id="btn-sync-setup">Nastavit Firebase</button>
    </div>

    <nav id="main-nav">
        <button class="nav-btn active" data-view="rybari">
            <span class="nav-icon">ğŸ‘¤</span>
            <span class="nav-label">RybÃ¡Å™i</span>
        </button>
        <button class="nav-btn" data-view="dochazka">
            <span class="nav-icon">ğŸ“…</span>
            <span class="nav-label">DochÃ¡zka</span>
        </button>
        <button class="nav-btn" data-view="ulovky">
            <span class="nav-icon">ğŸŸ</span>
            <span class="nav-label">Ãšlovky</span>
        </button>
        <button class="nav-btn" data-view="statistiky">
            <span class="nav-icon">ğŸ“Š</span>
            <span class="nav-label">Statistiky</span>
        </button>
    </nav>

    <main id="app">

        <!-- RYBÃÅ˜I -->
        <section id="view-rybari" class="view active">
            <div class="section-header">
                <h2>RybÃ¡Å™i</h2>
                <button class="btn btn-primary" id="btn-new-fisher">+ PÅ™idat</button>
            </div>
            <div id="fishers-list" class="card-list"></div>
            <div id="no-fishers" class="empty-state">
                <span class="empty-icon">ğŸ‘¤</span>
                <p>ZatÃ­m nejsou pÅ™idÃ¡ni Å¾Ã¡dnÃ­ rybÃ¡Å™i.</p>
                <p class="hint">KliknÄ›te na â€+ PÅ™idat" pro registraci.</p>
            </div>
        </section>

        <!-- DOCHÃZKA -->
        <section id="view-dochazka" class="view">
            <div class="section-header">
                <h2>DneÅ¡nÃ­ dochÃ¡zka</h2>
                <button class="btn btn-secondary btn-sm" id="btn-manual-checkin">+ RuÄnÃ­ zÃ¡znam</button>
            </div>
            <div id="dochazka-content"></div>
        </section>

        <!-- ÃšLOVKY -->
        <section id="view-ulovky" class="view">
            <div class="section-header">
                <h2>Ãšlovky</h2>
            </div>
            <div id="ulovky-content"></div>
        </section>

        <!-- STATISTIKY -->
        <section id="view-statistiky" class="view">
            <div class="section-header">
                <h2>Statistiky</h2>
                <select id="stats-year" class="year-select"></select>
            </div>
            <div id="statistiky-content"></div>
        </section>

    </main>

    <!-- PÅ˜ÃCHOD (pÅ™es QR) â€“ fullscreen overlay -->
    <div id="checkin-overlay" class="checkin-overlay" style="display:none;">
        <div class="checkin-card">
            <div class="checkin-fish-icon">ğŸ£</div>
            <h2 id="co-fisher-name">RybÃ¡Å™</h2>
            <p class="checkin-location">ğŸ“ HlybuÄek</p>
            <p class="checkin-time" id="co-time"></p>
            <div class="checkin-status-msg" id="co-status"></div>

            <div class="catch-quick-form" id="co-catch-form">
                <h3>PÅ™idat Ãºlovek?</h3>
                <div class="length-input-wrap">
                    <input type="number" id="co-catch-length" min="10" max="120"
                        placeholder="dÃ©lka cm" class="length-input">
                    <span class="length-unit">cm</span>
                </div>
                <div id="co-length-hint" class="length-hint"></div>
                <button class="btn btn-primary btn-full" id="co-catch-btn">ğŸŸ Zapsat Ãºlovek</button>
            </div>

            <button class="btn btn-secondary btn-full" id="co-close-btn" style="margin-top:0.75rem;">
                ZavÅ™Ã­t
            </button>
        </div>
    </div>

    <!-- MODAL: PÅ™idat rybÃ¡Å™e -->
    <div id="modal-fisher" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-fisher-title">NovÃ½ rybÃ¡Å™</h3>
                <button class="modal-close" id="modal-close-fisher">&times;</button>
            </div>
            <form id="fisher-form">
                <div class="form-group">
                    <label for="fisher-name">JmÃ©no a pÅ™Ã­jmenÃ­</label>
                    <input type="text" id="fisher-name" placeholder="Jan NovÃ¡k" required>
                </div>
                <div class="form-group">
                    <label for="fisher-number">ÄŒÃ­slo rybÃ¡Å™skÃ©ho lÃ­stku</label>
                    <input type="text" id="fisher-number" placeholder="12345">
                </div>
                <div class="form-group">
                    <label for="fisher-phone">Telefon</label>
                    <input type="tel" id="fisher-phone" placeholder="+420 123 456 789">
                </div>
                <button type="submit" class="btn btn-primary btn-full">UloÅ¾it</button>
            </form>
        </div>
    </div>

    <!-- MODAL: QR kÃ³d rybÃ¡Å™e -->
    <div id="modal-qr" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-qr-title">OsobnÃ­ QR kÃ³d</h3>
                <button class="modal-close" id="modal-close-qr">&times;</button>
            </div>
            <div id="qr-body" class="qr-body"></div>
        </div>
    </div>

    <!-- MODAL: RuÄnÃ­ zÃ¡znam dochÃ¡zky -->
    <div id="modal-manual" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>RuÄnÃ­ zÃ¡znam pÅ™Ã­chodu</h3>
                <button class="modal-close" id="modal-close-manual">&times;</button>
            </div>
            <div class="form-group">
                <label for="manual-fisher">RybÃ¡Å™</label>
                <select id="manual-fisher"></select>
            </div>
            <div class="form-group">
                <label for="manual-date">Datum</label>
                <input type="date" id="manual-date">
            </div>
            <button class="btn btn-primary btn-full" id="btn-save-manual">Zapsat pÅ™Ã­chod</button>
        </div>
    </div>

    <!-- MODAL: NastavenÃ­ -->
    <div id="modal-settings" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>âš™ï¸ NastavenÃ­</h3>
                <button class="modal-close" id="modal-close-settings">&times;</button>
            </div>
            <div class="settings-section">
                <h4>ğŸ”¥ Firebase â€“ sdÃ­lenÃ­ dat</h4>
                <p class="settings-desc">Bez Firebase jsou data jen v tomto prohlÃ­Å¾eÄi. Firebase = sdÃ­lenÃ­ pÅ™es vÅ¡echna zaÅ™Ã­zenÃ­ v reÃ¡lnÃ©m Äase.</p>
                <div id="firebase-status" class="firebase-status-box"></div>
                <div class="form-group">
                    <label for="settings-firebase-url">Database URL</label>
                    <input type="url" id="settings-firebase-url" placeholder="https://xxx-default-rtdb.europe-west1.firebasedatabase.app">
                </div>
                <div class="form-group">
                    <label for="settings-firebase-key">Web API Key</label>
                    <input type="text" id="settings-firebase-key" placeholder="AIzaSy...">
                </div>
                <button class="btn btn-primary btn-full" id="btn-save-firebase">PÅ™ipojit</button>
                <button class="btn btn-secondary btn-full" id="btn-disconnect-firebase" style="margin-top:0.5rem;display:none;">Odpojit Firebase</button>
            </div>
        </div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast"></div>

    <script src="app.js"></script>
</body>
</html>
